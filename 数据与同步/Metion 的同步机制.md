---
title: Metion 的同步机制
date: 2019-11-16 23:10:30
---
## Metion 的存储机制
Metion 的数据会存储于当前设备中，并且也会同时存储到 iCloud Drive 上（如果启用了），并且通过 iCloud Drive 来实现不同设备之间的数据同步。

## Metion 是怎么通过 iCloud 同步的？
Metion 会从 iCloud Drive 上同步新的文档到本地，另外，如果某个文档、文件夹只存在于本地或 iCloud 一端的，会保持双向复制，以保证数据的稳健。

由于 iCloud Drive 本身的机制，不能以文件是否存在于 iCloud 为唯一的标准。如果只在 iCloud 上删除了一个文档，Metion 也会把它从本地重新复制一份到 iCloud 上，若需要达到真正删除的结果，就需要在 Metion 的 App 内操作，才会同时删除设备本地、iCloud 上的文档。

注意：如果多设备上使用 Metion，A 设备上删除、移动、重命名文档的操作，B 设备也可能未获得及时的同步，会导致文档重复出现而需要在 B 设备上进行一次重复的操作。

## 自动同步与手动同步
一般情况下， Metion 会自动从 iCloud Drive 上寻找有没有需要同步的文档，这个过程会存在时间间隔。
如果需要手动触发这个同步机制的，可以下拉文件夹列表、文档列表，会出现一个刷新的操作提示，就会进行一次手动同步。但由于这取决于 iCloud 系统级的同步，未必会非常及时，所以有可能需要多操作几次，数据才会同步过来。

## iCloud 是怎么同步的？
iCloud 的同步是完全由苹果的操作系统控制的，也可能不是那么实时，快的时候几秒内完成同步，慢的时候则要花费几分钟甚至更长时间。

另外，iCloud 还会经常默默把一些本地的文档直接**清理**成一个**链接**，就能节省本地设备的存储容量了。特别是，当你的手机容量不够时，可能会频繁触发 iCloud 的清理机制。

## iPad 创建的文档很久也没同步到 iPhone 上？
我们前面简单介绍了 iCloud 的工作机制，如果发生这个情况，请耐心等待，完全取决于 iCloud……

## 为什么有时几秒钟可跨设备同步，有时久久不能？
请耐心等待，完全取决于 iCloud……

## 为什么 Metion 有时提示正在从 iCloud 同步，提示结束后为什么还没有完成同步？
请耐心等待，同步最终完全取决于 iCloud。
特别是文章中有插图的，图片已经被 iCloud 清掉了或者来自于其它设备，需要 Metion 重新同步回来，而这个同步的时间是不可预计的，甚至小概率会发生很久很久都不能完成同步，所以 Metion 不会**卡**在那里等待，仅做提示，几秒后就会自动隐藏了提示，它并不表示同步也完成了。其实，除了图片不马上显示之外，并不影响正常的文本编辑。

## 请相信苹果的警告
当你在 iOS 、iPadOS、macOS 上进行 iCloud 相关的操作时，有些警告信息，特别是包含 『删除』、『移除』、『不可恢复』这些关键字，即使你并不太明白警告信息的具体含义，但请务必相信来自苹果的警告，比如在 iCloud Drive 中删除整个 Metion 目录，系统会提醒『所有数据将不可恢复』，这是真的，删了就找不回了。
而且，一般情况下，你也不需要进行类似的操作……
